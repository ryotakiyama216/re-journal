# Re:Journal 要件定義書 (PRD)

## 1. コンセプト
**「辞めていい、戻っていい。AIが寄り添う3日坊主のためのジャーナリング」**

Re:Journalは、ユーザーが「書かなければならない」というプレッシャーから解放され、AI（Dify）が空白期間や途切れた思考を優しくフォローする、次世代のジャーナリング体験を提供します。

- **辞めていいノート**: 毎日書かなくても罪悪感を感じさせない設計。
- **3日坊主のジャーナル**: 3日間だけ集中して書く、あるいは3日坊主を繰り返すことを肯定する。
- **戻る日記**: 過去の自分に「返信（Re:）」する、あるいは空白期間を経て戻ってくることを歓迎する。

---

## 2. 機能要件

### 2.1 必須機能
- **制限時間タイマー**: 集中力を高め、書きすぎを防ぐためのタイマー機能（例：5分間集中）。

### 2.2 AI活用機能 (Dify連携)
Difyのワークフロー機能を活用し、以下の機能を実装します。

| 機能名 | 内容 |
| :--- | :--- |
| **AI返信 (Re:Message)** | 書いた内容に対し、AIが共感や気づきを与える返信を行う。 |
| **空白の橋渡し (Bridge)** | 数日ぶりに戻ってきた際、前回の内容を要約して「お帰りなさい」と共に再開を促す。 |
| **3日坊主サマリー** | 3日間続いた際、その3日間の思考の変遷をAIがレポート化する。 |
| **感情ログ分析** | テキストから感情の動きを抽出し、可視化する。 |
| **制限時間内アシスト** | 時間内に書くことが思いつかない時、AIが問いかけ（プロンプト）を出す。 |

---

## 3. プラン別機能制限 (サブスクリプション)

| カテゴリ | 無料プラン (Standard) | 有料プラン (Premium) |
| :--- | :--- | :---: |
| **ジャーナル** | 制限時間5分、直近7日保存 | 無制限保存、画像対応 |x
| **AI機能 (Dify)** | 基本的な感情分析のみ | **フル機能** (返信、要約、過去ログ連携) |
| **AI実行回数** | 1日1回まで | 無制限 (または高上限) |
| **データ** | プレーンテキスト | PDF/Markdown出力、AIレポート |

---

## 4. 画面構成案

ユーザー体験を最大化するための、主要な4つの画面構成です。

### 4.1 ホーム画面 (Home / Entry)
*   **状態 A: 待機時**
    *   「おかえりなさい」のメッセージと、現在の継続（または再開）状況の表示。
    *   AIによる前回の振り返り要約（有料プラン）。
    *   「Write」ボタン（ダイヤモンド型の象徴的なデザイン）。
*   **状態 B: 執筆時 (3ステップ・フロー)**
    *   **対話型インターフェース**: 以下の3つの質問に順番に回答する形式。
    *   **アダプティブ・ダイアログ (Dify連携)**: AIがユーザーの入力をリアルタイムに解析し、質問を動的に変化させる。
        1.  **Step 1 (固定)**: "What happened today?" (事実の記録)
        2.  **Step 2 (AI生成)**: 前項の内容に基づき、感情や思考を深掘りする独自の質問を生成。
        3.  **Step 3 (AI生成)**: 全体の文脈から、明日への一歩や気づきを促すパーソナライズされた質問を提示。
    *   **制限時間タイマー**: 5分間のカウントダウンによる集中維持。
    *   **洗練されたエディタ**:
        *   アンビエントな動的背景（Morning Mistトーン）。
        *   薄グレーの枠線と内側シャドウによる視認性の高い入力欄。
        *   漢字を排除した英語表記のナビゲーション（Next / Save）。
    *   **プログレス表示**: 現在のステップ（1〜3）を示すインジケーター。

### 4.2 ジャーナル履歴画面 (History)
*   **ミニマル・リストビュー**:
    *   **日付カード**: 曜日と日付をセットにした視覚的なインデックス。
    *   **サマリー表示**: 「今日何があった？」の回答の1行目のみを太文字で表示。
    *   **情報の整理**: 詳細な薄文字プレビューを排除し、垂直方向の中央揃えで整列された洗練されたレイアウト。
*   **カレンダービュー**: 記録がない日を「空白」ではなく「休憩（Rest）」として表現する優しいデザイン。
*   **AI返信の閲覧**: 各投稿に紐付いたAIからの返信（Re:Message）を確認。

### 4.3 振り返り・分析画面 (Insights)
*   **感情グラフ**: Difyで分析した感情の推移を可視化。
*   **3日坊主レポート**: 3日間ごとの思考の変遷をAIがまとめたサマリー。
*   **主要メトリクス**:
    *   **Journey (累計投稿数)**: これまでに積み上げてきたジャーナルの総数。「継続」ではなく「積み上げ」を可視化し、自分の歩みを肯定する。
    *   **Focus (現在のテーマ)**: AIが直近の内容から「今、一番関心を持っていること」を抽出して提示。
*   **キーワードクラウド**: よく使っている言葉の抽出。

### 4.4 設定・プラン管理画面 (Settings)
*   **プロフィール設定**: ユーザー情報、通知設定。
*   **サブスクリプション管理**: プランのアップグレード/ダウングレード（Stripe連携）。
*   **データエクスポート**: ジャーナルデータの書き出し。

---

## 5. ユーザー体験 (UX)
- 「継続」ではなく「再開」を祝う通知システム。
- 記録が途切れても、カレンダーに「空白」ではなく「休憩」として表示されるような優しいUI。
- 執筆終了後、すぐにAIからの返信が届く「対話感」の演出。